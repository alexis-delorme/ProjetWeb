<!DOCTYPE html>
<html>

<head>
  <title>List of Countries</title>
  <link href="/stylePays.css" rel="stylesheet" type="text/css" />
</head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<body class="noMargin">
  <div id="container1" class="border" style="background-color:sandybrown;">
    <div id="title" class="center">
      <h1>Amerique du Nord</h1>
    </div>
    <div id="navbar">
      <ul class="navlist">
        <li class="navlist-item"><a class="navlist-item-a" href="/Welcome.html">Accueil</a></li>
        <li class="navlist-item"><a class="navlist-item-a active" href="/countries.html">Liste de Pays</a></li>
        <li class="navlist-item"><a class="navlist-item-a" href="/country.html">Recherche</a></li>
        <li class="navlist-lang"><a class=" navlist-item-a" href="#lang">Languages</a></li>
      </ul>
    </div>
  </div>
  <div style="background-color: steelblue;">
    <h1>Tous les pays</h1>
    <p id="error_msg"></p>
    <div id="result"></div>
  </div>
</body>

</html>

<script>
  window.onload = getCountries;
  function getCountries(e) {
    var xhr = new XMLHttpRequest();

    // requête au serveur
    xhr.open("GET", "/service/countries", true);

    // fonction callback
    xhr.onload = function () {
      // récupération des informations au format json
      if (this.status == 200) {
        var data = JSON.parse(this.responseText);
        // window.console.log(data);
        window.result.innerHTML = data
          //.filter((name) => name[0] == "A")
          //.filter(function (name) {
          //  return name[0] == "B";
          //})
          //.filter((name) => filterA(name, "B"))
          .map(
            (name) =>
              '<p><a href="/country.html?country=' +
              name +
              '">' +
              name +
              "</a></p>"
          )
          .join("");
      }
      // affichage d'un message d'erreur
      else {
        window.country_data.style.display = "none";
        window.error_msg.innerHTML = this.statusText;
      }
    };
    xhr.send();
  }

  function filterA(name, letter) {
    return name[0] == letter;
  }
</script>